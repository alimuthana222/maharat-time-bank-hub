import{c as w,j as e,A as M,ae as z,p as l,af as se,ag as ae,r as a,ad as V,V as P,ah as m,D as Z,x as $,y as q,z as B,E as Q,X as J,C as te,m as ne,ai as le,aj as re,ak as ce,al as D,am as E,an as ie,a as oe,a6 as de,a5 as me,N as xe,_ as he,ao as ue,ac as A,U as F,ap as je,a1 as ge,J as pe,L as fe,a2 as ve,M as Ne,O as Ce,Q as we,l as ke}from"./index-Dc068xpD.js";import{H as ye}from"./heart-D4eoxrZo.js";import{F as be}from"./flag-M118n6SC.js";import{T as Se,a as Te,b as L,c as H}from"./tabs-BmUzbPR9.js";import{P as De}from"./plus-CE6TD9sF.js";import{T as Ae}from"./trending-up-C9AhK_DR.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=w("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=w("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=w("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=w("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=w("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function Re({comment:t}){const r=x=>{const n=new Date(x);return se(n,"d MMMM yyyy",{locale:ae})};return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{className:"h-8 w-8",children:e.jsx(z,{children:t.author[0]||"م"})}),e.jsxs("div",{className:"flex-1 bg-muted/30 p-3 rounded-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"font-medium text-sm",children:t.author}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r(t.createdAt)})]}),e.jsx("div",{className:"text-sm mt-1",children:t.content}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(l,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs flex items-center gap-1",children:[e.jsx(ye,{className:"h-3 w-3"}),e.jsx("span",{children:"إعجاب"})]}),e.jsx(l,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:"رد"})]})]})]})}function Ie({postId:t,comments:r,commentsCount:x,onAddComment:n}){var u,v;const[c,h]=a.useState(""),{user:i}=V(),f=()=>{var N;if(!i){m.error("يرجى تسجيل الدخول لإضافة تعليق");return}if(!c.trim()){m.error("التعليق لا يمكن أن يكون فارغاً");return}const o={id:`comment-${Date.now()}`,author:((N=i.user_metadata)==null?void 0:N.full_name)||"مستخدم",content:c,createdAt:new Date().toISOString()};n(o),h(""),m.success("تمت إضافة التعليق بنجاح")};return e.jsxs("div",{className:"w-full mt-4 border-t pt-4",children:[e.jsxs("h4",{className:"text-sm font-medium mb-3",children:["التعليقات (",x,")"]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(M,{className:"h-8 w-8",children:e.jsx(z,{children:((v=(u=i==null?void 0:i.user_metadata)==null?void 0:u.full_name)==null?void 0:v[0])||"م"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(P,{placeholder:"أضف تعليقاً...",value:c,onChange:o=>h(o.target.value),className:"mb-2 h-20 resize-none"}),e.jsx(l,{size:"sm",disabled:!c.trim(),onClick:f,children:"إضافة تعليق"})]})]}),e.jsx("div",{className:"space-y-4",children:r.length>0?r.map(o=>e.jsx(Re,{comment:o},o.id)):e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"لا توجد تعليقات. كن أول من يعلق!"})})]})}function _e({open:t,onOpenChange:r,onSubmitReport:x}){const[n,c]=a.useState(""),h=()=>{if(!n){m.error("يرجى ذكر سبب البلاغ");return}x(n),c("")};return e.jsx(Z,{open:t,onOpenChange:r,children:e.jsxs($,{className:"sm:max-w-[425px]",children:[e.jsxs(q,{children:[e.jsx(B,{children:"الإبلاغ عن المنشور"}),e.jsx(Q,{children:"يرجى توضيح سبب الإبلاغ عن هذا المنشور. سيتم مراجعة البلاغ من قبل المشرفين."})]}),e.jsx(P,{value:n,onChange:i=>c(i.target.value),placeholder:"اذكر سبب البلاغ...",className:"min-h-[100px]"}),e.jsxs(J,{children:[e.jsx(l,{variant:"outline",onClick:()=>r(!1),children:"إلغاء"}),e.jsx(l,{onClick:h,children:"إرسال البلاغ"})]})]})})}function U({id:t,title:r,content:x,author:n,createdAt:c,likesCount:h,commentsCount:i,tags:f=[]}){const[u,v]=a.useState(!1),[o,N]=a.useState(h),[j,b]=a.useState(!1),[s,g]=a.useState(!1),[p,k]=a.useState([]),[y,G]=a.useState(i),[X,S]=a.useState(!1),{user:T}=V(),K=d=>{const C=new Date(d);return new Intl.DateTimeFormat("ar",{day:"numeric",month:"long",year:"numeric"}).format(C)},W=()=>{if(!T){m.error("يرجى تسجيل الدخول للتفاعل مع المنشورات");return}N(u?d=>d-1:d=>d+1),v(!u)},R=()=>{if(!T){m.error("يرجى تسجيل الدخول لحفظ المنشورات");return}b(!j),m.success(j?"تم إلغاء حفظ المنشور":"تم حفظ المنشور")},I=()=>{navigator.share?navigator.share({title:r,text:`${r} - ${n.name}`,url:window.location.href}).catch(d=>{console.error("Error sharing: ",d),m.error("حدث خطأ أثناء المشاركة")}):navigator.clipboard.writeText(window.location.href).then(()=>m.success("تم نسخ رابط المنشور إلى الحافظة")).catch(()=>m.error("حدث خطأ أثناء نسخ الرابط"))},_=()=>{if(!T){m.error("يرجى تسجيل الدخول للإبلاغ عن المنشورات");return}S(!0)},Y=d=>{m.success("تم إرسال البلاغ وسيتم مراجعته من قبل المشرفين"),S(!1)},ee=d=>{k([...p,d]),G(C=>C+1)};return e.jsxs(te,{className:"mb-4",children:[e.jsx(ne,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{children:e.jsx(z,{children:n.avatarFallback})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:n.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n.university})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:K(c)}),e.jsxs(le,{children:[e.jsx(re,{asChild:!0,children:e.jsxs(l,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"المزيد من الخيارات"})]})}),e.jsxs(ce,{align:"end",children:[e.jsxs(D,{onClick:R,children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:j?"إلغاء الحفظ":"حفظ المنشور"})]}),e.jsxs(D,{onClick:I,children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"مشاركة المنشور"})]}),e.jsx(ie,{}),e.jsxs(D,{onClick:_,className:"text-red-500",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"الإبلاغ عن المنشور"})]})]})]})]})]})}),e.jsxs(oe,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:r}),e.jsx("p",{className:"text-muted-foreground mb-3",children:x}),f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((d,C)=>e.jsxs("div",{className:"bg-muted text-xs rounded-full px-2.5 py-1",children:["#",d]},C))})]}),e.jsxs(de,{className:"border-t pt-3 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(l,{variant:"ghost",size:"sm",className:`flex gap-2 items-center ${u?"text-primary":""}`,onClick:W,children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{children:o})]}),e.jsxs(l,{variant:"ghost",size:"sm",className:"flex gap-2 items-center",onClick:()=>g(!s),children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:y})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:j?"default":"ghost",size:"sm",onClick:R,className:"flex gap-1 items-center",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:j?"محفوظ":"حفظ"})]}),e.jsx(l,{variant:"ghost",size:"icon",onClick:I,children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:_,children:e.jsx(be,{className:"h-4 w-4"})})]})]}),s&&e.jsx(Ie,{postId:t,comments:p,commentsCount:y,onAddComment:ee})]}),e.jsx(_e,{open:X,onOpenChange:S,onSubmitReport:Y})]})}const Ee=[{id:"1",title:"نصائح للاستعداد للاختبارات النهائية",content:"أنا طالب في السنة الثالثة وأبحث عن نصائح للاستعداد للاختبارات النهائية بشكل فعال. ما هي الطرق التي تستخدمونها للمذاكرة وتنظيم الوقت؟",author:{name:"أحمد محمد",avatarFallback:"أم",university:"جامعة الملك سعود"},createdAt:"2025-04-15T10:30:00Z",likesCount:15,commentsCount:8,tags:["مذاكرة","اختبارات","نصائح"]},{id:"2",title:"تجربتي في تطوير مهاراتي البرمجية",content:"أود مشاركة تجربتي في تطوير مهاراتي البرمجية من خلال العمل على مشاريع صغيرة والتعلم الذاتي. بدأت منذ سنة تقريباً وأرى تقدماً ملحوظاً...",author:{name:"سارة العتيبي",avatarFallback:"سع",university:"جامعة الأميرة نورة"},createdAt:"2025-04-14T14:45:00Z",likesCount:23,commentsCount:12,tags:["برمجة","تطوير_ذاتي","تعلم"]},{id:"3",title:"البحث عن مجموعة دراسية في تخصص إدارة الأعمال",content:"أبحث عن طلاب مهتمين بتشكيل مجموعة دراسية في تخصص إدارة الأعمال للفصل الدراسي القادم. هدفنا المذاكرة الجماعية وتبادل المعارف والخبرات.",author:{name:"خالد الزهراني",avatarFallback:"خز",university:"جامعة الملك فهد"},createdAt:"2025-04-12T09:15:00Z",likesCount:8,commentsCount:15,tags:["إدارة_أعمال","مجموعة_دراسية"]},{id:"4",title:"تجربة التدريب الصيفي في شركة أرامكو",content:"أود مشاركة تجربتي في التدريب الصيفي بشركة أرامكو العام الماضي. كانت تجربة مميزة تعلمت منها الكثير وأنصح الجميع بالتقديم...",author:{name:"نورة السالم",avatarFallback:"نس",university:"جامعة الملك عبدالعزيز"},createdAt:"2025-04-10T16:20:00Z",likesCount:45,commentsCount:22,tags:["تدريب_صيفي","أرامكو","خبرات"]}],Le=["الكل","أكاديمي","مهني","تقني","اجتماعي","ثقافي","رياضي","فني"];function qe(){const[t,r]=a.useState(""),[x,n]=a.useState(Ee),[c,h]=a.useState(""),[i,f]=a.useState(""),[u,v]=a.useState(""),[o,N]=a.useState("الكل"),j=x.filter(s=>{var k;const g=s.title.includes(t)||s.content.includes(t)||((k=s.tags)==null?void 0:k.some(y=>y.includes(t))),p=o==="الكل"||s.tags&&s.tags.includes(o);return g&&p}),b=()=>{if(!c.trim()||!i.trim())return;const s=u.split(",").map(p=>p.trim()).filter(p=>p.length>0),g={id:`${x.length+1}`,title:c,content:i,author:{name:"أنت",avatarFallback:"أن",university:"جامعتك"},createdAt:new Date().toISOString(),likesCount:0,commentsCount:0,tags:s};n([g,...x]),h(""),f(""),v("")};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(xe,{}),e.jsx("main",{className:"flex-1",children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"المجتمع"})]}),e.jsxs(Z,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(l,{children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"إنشاء منشور"]})}),e.jsxs($,{className:"sm:max-w-[600px]",children:[e.jsxs(q,{children:[e.jsx(B,{children:"إنشاء منشور جديد"}),e.jsx(Q,{children:"شارك أفكارك واستفساراتك مع مجتمع الطلاب"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"title",children:"عنوان المنشور"}),e.jsx(F,{id:"title",placeholder:"أدخل عنوان المنشور",value:c,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"content",children:"محتوى المنشور"}),e.jsx(P,{id:"content",placeholder:"اكتب محتوى منشورك هنا...",rows:5,value:i,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(A,{htmlFor:"tags",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"الوسوم"]}),e.jsx(F,{id:"tags",placeholder:"أدخل الوسوم مفصولة بفواصل (مثال: جامعة، دراسة، تخصص)",value:u,onChange:s=>v(s.target.value)})]})]}),e.jsxs(J,{children:[e.jsx(je,{asChild:!0,children:e.jsx(l,{variant:"outline",children:"إلغاء"})}),e.jsx(l,{onClick:b,children:"نشر"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(ge,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(F,{placeholder:"ابحث في المجتمع...",className:"pl-10",value:t,onChange:s=>r(s.target.value)})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(pe,{value:o,onValueChange:N,children:[e.jsxs(fe,{className:"w-[180px]",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),e.jsx(Ne,{placeholder:"التصنيف"})]}),e.jsx(Ce,{children:Le.map(s=>e.jsx(we,{value:s,children:s},s))})]})})]}),e.jsxs(Se,{defaultValue:"recent",children:[e.jsxs(Te,{className:"mb-6",children:[e.jsxs(L,{value:"recent",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"الأحدث"]}),e.jsxs(L,{value:"trending",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"الأكثر تفاعلاً"]})]}),e.jsx(H,{value:"recent",children:j.length>0?j.map(s=>e.jsx(U,{...s},s.id)):e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-muted-foreground",children:"لا توجد منشورات تطابق بحثك"})})}),e.jsx(H,{value:"trending",children:j.sort((s,g)=>g.likesCount+g.commentsCount-(s.likesCount+s.commentsCount)).map(s=>e.jsx(U,{...s},s.id))})]})]})})]})}export{qe as default};
