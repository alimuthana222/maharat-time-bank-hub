import{c as O,af as m,ag as P,ah as z,ai as L,aj as b,ak as k,al as y,am as X,an as _,r as j,ad as R,ao as E,j as e,C as H,m as V,A as U,ae as Y,ap as Z,aq as B,p as v,ar as Q,as as q,a as $,B as G,a6 as J,a5 as K,at as W,au as ee,N as se,_ as te,D as ae,av as ne,x as re,y as le,z as ce,E as ie,ac as S,U as T,V as oe,X as de,aw as me,a1 as ue,J as he,L as xe,a2 as fe,M as ge,O as je,Q as ve,l as Ne}from"./index-DC1R3hf7.js";import{F as pe}from"./flag-JHiyFB94.js";import{H as Ce}from"./heart-6sBI8G9B.js";import{T as De,a as ye,b as F,c as I}from"./tabs-BFUdJ7ow.js";import{P as Me}from"./plus-B8Av4JoM.js";import{T as we}from"./tag-Cp8QYnR4.js";import{T as Se}from"./trending-up-wM1QOMBf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=O("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function M(t,l){const a=m(t),c=m(l),n=a.getTime()-c.getTime();return n<0?-1:n>0?1:n}function be(t){return P(t,Date.now())}function ke(t){return l=>{const c=(t?Math[t]:Math.trunc)(l);return c===0?0:c}}function Fe(t,l){return+m(t)-+m(l)}function Ie(t){const l=m(t);return l.setHours(23,59,59,999),l}function Ae(t){const l=m(t);return+Ie(l)==+z(l)}function Oe(t,l){const a=m(t),c=m(l),n=M(a,c),h=Math.abs(L(a,c));let d;if(h<1)d=0;else{a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-n*h);let r=M(a,c)===-n;Ae(m(t))&&h===1&&M(t,c)===1&&(r=!1),d=n*(h-Number(r))}return d===0?0:d}function Pe(t,l,a){const c=Fe(t,l)/1e3;return ke(a==null?void 0:a.roundingMethod)(c)}function ze(t,l,a){const c=_(),n=(a==null?void 0:a.locale)??c.locale??X,h=2520,d=M(t,l);if(isNaN(d))throw new RangeError("Invalid time value");const r=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:d});let f,x;d>0?(f=m(l),x=m(t)):(f=m(t),x=m(l));const o=Pe(x,f),p=(b(x)-b(f))/1e3,i=Math.round((o-p)/60);let g;if(i<2)return a!=null&&a.includeSeconds?o<5?n.formatDistance("lessThanXSeconds",5,r):o<10?n.formatDistance("lessThanXSeconds",10,r):o<20?n.formatDistance("lessThanXSeconds",20,r):o<40?n.formatDistance("halfAMinute",0,r):o<60?n.formatDistance("lessThanXMinutes",1,r):n.formatDistance("xMinutes",1,r):i===0?n.formatDistance("lessThanXMinutes",1,r):n.formatDistance("xMinutes",i,r);if(i<45)return n.formatDistance("xMinutes",i,r);if(i<90)return n.formatDistance("aboutXHours",1,r);if(i<k){const s=Math.round(i/60);return n.formatDistance("aboutXHours",s,r)}else{if(i<h)return n.formatDistance("xDays",1,r);if(i<y){const s=Math.round(i/k);return n.formatDistance("xDays",s,r)}else if(i<y*2)return g=Math.round(i/y),n.formatDistance("aboutXMonths",g,r)}if(g=Oe(x,f),g<12){const s=Math.round(i/y);return n.formatDistance("xMonths",s,r)}else{const s=g%12,u=Math.trunc(g/12);return s<3?n.formatDistance("aboutXYears",u,r):s<9?n.formatDistance("overXYears",u,r):n.formatDistance("almostXYears",u+1,r)}}function Le(t,l){return ze(t,be(t),l)}function A({id:t,title:l,content:a,author:c,createdAt:n,likesCount:h,commentsCount:d,tags:r,onToggleComments:f,isPreview:x=!1}){const[o,p]=j.useState(!1),[i,g]=j.useState(h),{user:s}=R(),{openReportDialog:u}=E(),N=()=>{s&&(p(!o),g(C=>o?C-1:C+1))},D=()=>{!s||!c.id||u(t,"post",c.id)},w=Le(new Date(n),{addSuffix:!0,locale:ee});return e.jsxs(H,{className:"mb-6",children:[e.jsxs(V,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx(U,{children:e.jsx(Y,{children:c.avatarFallback})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:c.name}),c.university&&e.jsx("p",{className:"text-sm text-muted-foreground",children:c.university})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx("span",{className:"ml-2 rtl:mr-2",children:w}),e.jsxs(Z,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(v,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[e.jsx(Te,{size:16}),e.jsx("span",{className:"sr-only",children:"القائمة"})]})}),e.jsx(Q,{align:"end",children:s&&c.id&&c.id!==s.id&&e.jsxs(q,{onClick:D,className:"text-red-500",children:[e.jsx(pe,{size:16,className:"ml-2 rtl:mr-2"}),"الإبلاغ عن المنشور"]})})]})]})]}),e.jsx("h2",{className:"text-xl font-bold mt-4",children:l})]}),e.jsxs($,{children:[e.jsx("p",{className:x?"line-clamp-3":"",children:a}),r&&r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:r.map(C=>e.jsx(G,{variant:"secondary",children:C},C))})]}),e.jsxs(J,{className:"border-t pt-3 flex justify-between",children:[e.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse",children:[e.jsxs(v,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${o?"text-red-500":""}`,onClick:N,children:[e.jsx(Ce,{size:18,className:o?"fill-current":""}),e.jsx("span",{children:i})]}),e.jsxs(v,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:f,children:[e.jsx(K,{size:18}),e.jsx("span",{children:d})]}),e.jsx(v,{variant:"ghost",size:"sm",className:"flex items-center gap-1",children:e.jsx(W,{size:18})})]}),x&&e.jsx(v,{variant:"ghost",size:"sm",children:"قراءة المزيد"})]})]})}const Xe=[{id:"1",title:"نصائح للاستعداد للاختبارات النهائية",content:"أنا طالب في السنة الثالثة وأبحث عن نصائح للاستعداد للاختبارات النهائية بشكل فعال. ما هي الطرق التي تستخدمونها للمذاكرة وتنظيم الوقت؟",author:{name:"أحمد محمد",avatarFallback:"أم",university:"جامعة الملك سعود"},createdAt:"2025-04-15T10:30:00Z",likesCount:15,commentsCount:8,tags:["مذاكرة","اختبارات","نصائح"]},{id:"2",title:"تجربتي في تطوير مهاراتي البرمجية",content:"أود مشاركة تجربتي في تطوير مهاراتي البرمجية من خلال العمل على مشاريع صغيرة والتعلم الذاتي. بدأت منذ سنة تقريباً وأرى تقدماً ملحوظاً...",author:{name:"سارة العتيبي",avatarFallback:"سع",university:"جامعة الأميرة نورة"},createdAt:"2025-04-14T14:45:00Z",likesCount:23,commentsCount:12,tags:["برمجة","تطوير_ذاتي","تعلم"]},{id:"3",title:"البحث عن مجموعة دراسية في تخصص إدارة الأعمال",content:"أبحث عن طلاب مهتمين بتشكيل مجموعة دراسية في تخصص إدارة الأعمال للفصل الدراسي القادم. هدفنا المذاكرة الجماعية وتبادل المعارف والخبرات.",author:{name:"خالد الزهراني",avatarFallback:"خز",university:"جامعة الملك فهد"},createdAt:"2025-04-12T09:15:00Z",likesCount:8,commentsCount:15,tags:["إدارة_أعمال","مجموعة_دراسية"]},{id:"4",title:"تجربة التدريب الصيفي في شركة أرامكو",content:"أود مشاركة تجربتي في التدريب الصيفي بشركة أرامكو العام الماضي. كانت تجربة مميزة تعلمت منها الكثير وأنصح الجميع بالتقديم...",author:{name:"نورة السالم",avatarFallback:"نس",university:"جامعة الملك عبدالعزيز"},createdAt:"2025-04-10T16:20:00Z",likesCount:45,commentsCount:22,tags:["تدريب_صيفي","أرامكو","خبرات"]}],_e=["الكل","أكاديمي","مهني","تقني","اجتماعي","ثقافي","رياضي","فني"];function Be(){const[t,l]=j.useState(""),[a,c]=j.useState(Xe),[n,h]=j.useState(""),[d,r]=j.useState(""),[f,x]=j.useState(""),[o,p]=j.useState("الكل"),i=a.filter(s=>{var D;const u=s.title.includes(t)||s.content.includes(t)||((D=s.tags)==null?void 0:D.some(w=>w.includes(t))),N=o==="الكل"||s.tags&&s.tags.includes(o);return u&&N}),g=()=>{if(!n.trim()||!d.trim())return;const s=f.split(",").map(N=>N.trim()).filter(N=>N.length>0),u={id:`${a.length+1}`,title:n,content:d,author:{name:"أنت",avatarFallback:"أن",university:"جامعتك"},createdAt:new Date().toISOString(),likesCount:0,commentsCount:0,tags:s};c([u,...a]),h(""),r(""),x("")};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(se,{}),e.jsx("main",{className:"flex-1",children:e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"المجتمع"})]}),e.jsxs(ae,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(v,{children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"إنشاء منشور"]})}),e.jsxs(re,{className:"sm:max-w-[600px]",children:[e.jsxs(le,{children:[e.jsx(ce,{children:"إنشاء منشور جديد"}),e.jsx(ie,{children:"شارك أفكارك واستفساراتك مع مجتمع الطلاب"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"title",children:"عنوان المنشور"}),e.jsx(T,{id:"title",placeholder:"أدخل عنوان المنشور",value:n,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"content",children:"محتوى المنشور"}),e.jsx(oe,{id:"content",placeholder:"اكتب محتوى منشورك هنا...",rows:5,value:d,onChange:s=>r(s.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(S,{htmlFor:"tags",className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"الوسوم"]}),e.jsx(T,{id:"tags",placeholder:"أدخل الوسوم مفصولة بفواصل (مثال: جامعة، دراسة، تخصص)",value:f,onChange:s=>x(s.target.value)})]})]}),e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsx(v,{variant:"outline",children:"إلغاء"})}),e.jsx(v,{onClick:g,children:"نشر"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(T,{placeholder:"ابحث في المجتمع...",className:"pl-10",value:t,onChange:s=>l(s.target.value)})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(he,{value:o,onValueChange:p,children:[e.jsxs(xe,{className:"w-[180px]",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),e.jsx(ge,{placeholder:"التصنيف"})]}),e.jsx(je,{children:_e.map(s=>e.jsx(ve,{value:s,children:s},s))})]})})]}),e.jsxs(De,{defaultValue:"recent",children:[e.jsxs(ye,{className:"mb-6",children:[e.jsxs(F,{value:"recent",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"الأحدث"]}),e.jsxs(F,{value:"trending",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"الأكثر تفاعلاً"]})]}),e.jsx(I,{value:"recent",children:i.length>0?i.map(s=>e.jsx(A,{...s},s.id)):e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-muted-foreground",children:"لا توجد منشورات تطابق بحثك"})})}),e.jsx(I,{value:"trending",children:i.sort((s,u)=>u.likesCount+u.commentsCount-(s.likesCount+s.commentsCount)).map(s=>e.jsx(A,{...s},s.id))})]})]})})]})}export{Be as default};
